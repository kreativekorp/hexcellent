package com.kreative.templature.test;

import java.io.ByteArrayInputStream;
import java.math.BigInteger;
import com.kreative.templature.template.BufferedCountedInputStream;
import com.kreative.templature.template.Closure;
import com.kreative.templature.template.item.VLPDItem;

public class VLPDInputTest extends AbstractTest {
	private static final int[][] BEB100_TESTS = {
		{ 0, 0x00},
		{ 7, 0x07},
		{ 8, 0x08},
		{ 9, 0x09},
		{70, 0x70},
		{77, 0x77},
		{78, 0x78},
		{79, 0x79},
		{80, 0x0A},
		{87, 0x6B},
		{88, 0x4E},
		{89, 0x4F},
		{90, 0x1A},
		{97, 0x7B},
		{98, 0x5E},
		{99, 0x5F},
		{ 0, 0x80, 0x00},
		{ 7, 0x80, 0x07},
		{ 8, 0x80, 0x08},
		{ 9, 0x80, 0x09},
		{70, 0x80, 0x70},
		{77, 0x80, 0x77},
		{78, 0x80, 0x78},
		{79, 0x80, 0x79},
		{80, 0x80, 0x0A},
		{87, 0x80, 0x6B},
		{88, 0x80, 0x4E},
		{89, 0x80, 0x4F},
		{90, 0x80, 0x1A},
		{97, 0x80, 0x7B},
		{98, 0x80, 0x5E},
		{99, 0x80, 0x5F},
		{ 0, 0x80, 0x80, 0x00},
		{ 7, 0x80, 0x80, 0x07},
		{ 8, 0x80, 0x80, 0x08},
		{ 9, 0x80, 0x80, 0x09},
		{70, 0x80, 0x80, 0x70},
		{77, 0x80, 0x80, 0x77},
		{78, 0x80, 0x80, 0x78},
		{79, 0x80, 0x80, 0x79},
		{80, 0x80, 0x80, 0x0A},
		{87, 0x80, 0x80, 0x6B},
		{88, 0x80, 0x80, 0x4E},
		{89, 0x80, 0x80, 0x4F},
		{90, 0x80, 0x80, 0x1A},
		{97, 0x80, 0x80, 0x7B},
		{98, 0x80, 0x80, 0x5E},
		{99, 0x80, 0x80, 0x5F},
		
		{ 100, 0x81, 0x00},
		{ 123, 0x81, 0x23},
		{1234, 0x92, 0x34},
		{2345, 0xA3, 0x45},
		{3456, 0xB4, 0x56},
		{4567, 0xC5, 0x67},
		{5678, 0xD6, 0x78},
		{6789, 0xE7, 0x4F},
		{7899, 0xF8, 0x5F},
		{8999, 0xCF, 0x5F},
		{9999, 0xDF, 0x5F},
		{ 100, 0x80, 0x81, 0x00},
		{ 123, 0x80, 0x81, 0x23},
		{1234, 0x80, 0x92, 0x34},
		{2345, 0x80, 0xA3, 0x45},
		{3456, 0x80, 0xB4, 0x56},
		{4567, 0x80, 0xC5, 0x67},
		{5678, 0x80, 0xD6, 0x78},
		{6789, 0x80, 0xE7, 0x4F},
		{7899, 0x80, 0xF8, 0x5F},
		{8999, 0x80, 0xCF, 0x5F},
		{9999, 0x80, 0xDF, 0x5F},
		{ 100, 0x80, 0x80, 0x81, 0x00},
		{ 123, 0x80, 0x80, 0x81, 0x23},
		{1234, 0x80, 0x80, 0x92, 0x34},
		{2345, 0x80, 0x80, 0xA3, 0x45},
		{3456, 0x80, 0x80, 0xB4, 0x56},
		{4567, 0x80, 0x80, 0xC5, 0x67},
		{5678, 0x80, 0x80, 0xD6, 0x78},
		{6789, 0x80, 0x80, 0xE7, 0x4F},
		{7899, 0x80, 0x80, 0xF8, 0x5F},
		{8999, 0x80, 0x80, 0xCF, 0x5F},
		{9999, 0x80, 0x80, 0xDF, 0x5F},
		
		{ 10000, 0x81, 0x80, 0x00},
		{ 12345, 0x81, 0xA3, 0x45},
		{123456, 0x92, 0xB4, 0x56},
		{234567, 0xA3, 0xC5, 0x67},
		{345678, 0xB4, 0xD6, 0x78},
		{456789, 0xC5, 0xE7, 0x4F},
		{567899, 0xD6, 0xF8, 0x5F},
		{678999, 0xE7, 0xCF, 0x5F},
		{789999, 0xF8, 0xDF, 0x5F},
		{899999, 0xCF, 0xDF, 0x5F},
		{999999, 0xDF, 0xDF, 0x5F},
		{ 10000, 0x80, 0x81, 0x80, 0x00},
		{ 12345, 0x80, 0x81, 0xA3, 0x45},
		{123456, 0x80, 0x92, 0xB4, 0x56},
		{234567, 0x80, 0xA3, 0xC5, 0x67},
		{345678, 0x80, 0xB4, 0xD6, 0x78},
		{456789, 0x80, 0xC5, 0xE7, 0x4F},
		{567899, 0x80, 0xD6, 0xF8, 0x5F},
		{678999, 0x80, 0xE7, 0xCF, 0x5F},
		{789999, 0x80, 0xF8, 0xDF, 0x5F},
		{899999, 0x80, 0xCF, 0xDF, 0x5F},
		{999999, 0x80, 0xDF, 0xDF, 0x5F},
		{ 10000, 0x80, 0x80, 0x81, 0x80, 0x00},
		{ 12345, 0x80, 0x80, 0x81, 0xA3, 0x45},
		{123456, 0x80, 0x80, 0x92, 0xB4, 0x56},
		{234567, 0x80, 0x80, 0xA3, 0xC5, 0x67},
		{345678, 0x80, 0x80, 0xB4, 0xD6, 0x78},
		{456789, 0x80, 0x80, 0xC5, 0xE7, 0x4F},
		{567899, 0x80, 0x80, 0xD6, 0xF8, 0x5F},
		{678999, 0x80, 0x80, 0xE7, 0xCF, 0x5F},
		{789999, 0x80, 0x80, 0xF8, 0xDF, 0x5F},
		{899999, 0x80, 0x80, 0xCF, 0xDF, 0x5F},
		{999999, 0x80, 0x80, 0xDF, 0xDF, 0x5F},
		
		{0}, {0,0x80}, {7,0x87}
	};
	
	private static final int[][] LEB100_TESTS = {
		{ 0, 0x00},
		{ 7, 0x07},
		{ 8, 0x08},
		{ 9, 0x09},
		{70, 0x70},
		{77, 0x77},
		{78, 0x78},
		{79, 0x79},
		{80, 0x0A},
		{87, 0x6B},
		{88, 0x4E},
		{89, 0x4F},
		{90, 0x1A},
		{97, 0x7B},
		{98, 0x5E},
		{99, 0x5F},
		{ 0, 0x80, 0x00},
		{ 7, 0x87, 0x00},
		{ 8, 0x88, 0x00},
		{ 9, 0x89, 0x00},
		{70, 0xF0, 0x00},
		{77, 0xF7, 0x00},
		{78, 0xF8, 0x00},
		{79, 0xF9, 0x00},
		{80, 0x8A, 0x00},
		{87, 0xEB, 0x00},
		{88, 0xCE, 0x00},
		{89, 0xCF, 0x00},
		{90, 0x9A, 0x00},
		{97, 0xFB, 0x00},
		{98, 0xDE, 0x00},
		{99, 0xDF, 0x00},
		{ 0, 0x80, 0x80, 0x00},
		{ 7, 0x87, 0x80, 0x00},
		{ 8, 0x88, 0x80, 0x00},
		{ 9, 0x89, 0x80, 0x00},
		{70, 0xF0, 0x80, 0x00},
		{77, 0xF7, 0x80, 0x00},
		{78, 0xF8, 0x80, 0x00},
		{79, 0xF9, 0x80, 0x00},
		{80, 0x8A, 0x80, 0x00},
		{87, 0xEB, 0x80, 0x00},
		{88, 0xCE, 0x80, 0x00},
		{89, 0xCF, 0x80, 0x00},
		{90, 0x9A, 0x80, 0x00},
		{97, 0xFB, 0x80, 0x00},
		{98, 0xDE, 0x80, 0x00},
		{99, 0xDF, 0x80, 0x00},
		
		{ 100, 0x80, 0x01},
		{ 123, 0xA3, 0x01},
		{1234, 0xB4, 0x12},
		{2345, 0xC5, 0x23},
		{3456, 0xD6, 0x34},
		{4567, 0xE7, 0x45},
		{5678, 0xF8, 0x56},
		{6789, 0xCF, 0x67},
		{7899, 0xDF, 0x78},
		{8999, 0xDF, 0x4F},
		{9999, 0xDF, 0x5F},
		{ 100, 0x80, 0x81, 0x00},
		{ 123, 0xA3, 0x81, 0x00},
		{1234, 0xB4, 0x92, 0x00},
		{2345, 0xC5, 0xA3, 0x00},
		{3456, 0xD6, 0xB4, 0x00},
		{4567, 0xE7, 0xC5, 0x00},
		{5678, 0xF8, 0xD6, 0x00},
		{6789, 0xCF, 0xE7, 0x00},
		{7899, 0xDF, 0xF8, 0x00},
		{8999, 0xDF, 0xCF, 0x00},
		{9999, 0xDF, 0xDF, 0x00},
		{ 100, 0x80, 0x81, 0x80, 0x00},
		{ 123, 0xA3, 0x81, 0x80, 0x00},
		{1234, 0xB4, 0x92, 0x80, 0x00},
		{2345, 0xC5, 0xA3, 0x80, 0x00},
		{3456, 0xD6, 0xB4, 0x80, 0x00},
		{4567, 0xE7, 0xC5, 0x80, 0x00},
		{5678, 0xF8, 0xD6, 0x80, 0x00},
		{6789, 0xCF, 0xE7, 0x80, 0x00},
		{7899, 0xDF, 0xF8, 0x80, 0x00},
		{8999, 0xDF, 0xCF, 0x80, 0x00},
		{9999, 0xDF, 0xDF, 0x80, 0x00},
		
		{ 10000, 0x80, 0x80, 0x01},
		{ 12345, 0xC5, 0xA3, 0x01},
		{123456, 0xD6, 0xB4, 0x12},
		{234567, 0xE7, 0xC5, 0x23},
		{345678, 0xF8, 0xD6, 0x34},
		{456789, 0xCF, 0xE7, 0x45},
		{567899, 0xDF, 0xF8, 0x56},
		{678999, 0xDF, 0xCF, 0x67},
		{789999, 0xDF, 0xDF, 0x78},
		{899999, 0xDF, 0xDF, 0x4F},
		{999999, 0xDF, 0xDF, 0x5F},
		{ 10000, 0x80, 0x80, 0x81, 0x00},
		{ 12345, 0xC5, 0xA3, 0x81, 0x00},
		{123456, 0xD6, 0xB4, 0x92, 0x00},
		{234567, 0xE7, 0xC5, 0xA3, 0x00},
		{345678, 0xF8, 0xD6, 0xB4, 0x00},
		{456789, 0xCF, 0xE7, 0xC5, 0x00},
		{567899, 0xDF, 0xF8, 0xD6, 0x00},
		{678999, 0xDF, 0xCF, 0xE7, 0x00},
		{789999, 0xDF, 0xDF, 0xF8, 0x00},
		{899999, 0xDF, 0xDF, 0xCF, 0x00},
		{999999, 0xDF, 0xDF, 0xDF, 0x00},
		{ 10000, 0x80, 0x80, 0x81, 0x80, 0x00},
		{ 12345, 0xC5, 0xA3, 0x81, 0x80, 0x00},
		{123456, 0xD6, 0xB4, 0x92, 0x80, 0x00},
		{234567, 0xE7, 0xC5, 0xA3, 0x80, 0x00},
		{345678, 0xF8, 0xD6, 0xB4, 0x80, 0x00},
		{456789, 0xCF, 0xE7, 0xC5, 0x80, 0x00},
		{567899, 0xDF, 0xF8, 0xD6, 0x80, 0x00},
		{678999, 0xDF, 0xCF, 0xE7, 0x80, 0x00},
		{789999, 0xDF, 0xDF, 0xF8, 0x80, 0x00},
		{899999, 0xDF, 0xDF, 0xCF, 0x80, 0x00},
		{999999, 0xDF, 0xDF, 0xDF, 0x80, 0x00},
		
		{0}, {0,0x80}, {7,0x87}
	};
	
	public void run() throws Exception {
		for (int[] td : BEB100_TESTS) {
			byte[] data = new byte[td.length];
			for (int i = 0; i < td.length; i++) data[i] = (byte)td[i];
			ByteArrayInputStream bin = new ByteArrayInputStream(data, 1, td.length - 1);
			VLPDItem item = new VLPDItem(0, "", "", false, 10);
			VLPDItem.Instance inst = item.read(new Closure(null), new BufferedCountedInputStream(bin));
			BigInteger v = inst.getValue();
			record(v.equals(BigInteger.valueOf(td[0])), v, td[0]);
		}
		
		for (int[] td : LEB100_TESTS) {
			byte[] data = new byte[td.length];
			for (int i = 0; i < td.length; i++) data[i] = (byte)td[i];
			ByteArrayInputStream bin = new ByteArrayInputStream(data, 1, td.length - 1);
			VLPDItem item = new VLPDItem(0, "", "", true, 10);
			VLPDItem.Instance inst = item.read(new Closure(null), new BufferedCountedInputStream(bin));
			BigInteger v = inst.getValue();
			record(v.equals(BigInteger.valueOf(td[0])), v, td[0]);
		}
	}
	
	public static void main(String[] args) {
		new VLPDInputTest().main();
	}
}
